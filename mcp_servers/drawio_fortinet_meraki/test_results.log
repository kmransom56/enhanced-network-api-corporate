INFO:api_documentation:Intelligent API MCP initialized
ERROR:api_documentation:LLM API error: 404
ERROR:api_documentation:Error generating API request: LLM request failed
ERROR:api_documentation:LLM API error: 404
ERROR:api_documentation:Error generating API request: LLM request failed
ERROR:api_documentation:LLM API error: 404
ERROR:api_documentation:Error generating API request: LLM request failed
ERROR:api_documentation:LLM API error: 404
ERROR:api_documentation:Error generating API request: LLM request failed
ERROR:api_documentation:LLM API error: 404
ERROR:api_documentation:Error generating API request: LLM request failed
INFO:drawio-fortinet-meraki-mcp:FortiGate collector initialized for 192.168.0.254:10443
INFO:drawio-fortinet-meraki-mcp:Username: !cg@RW%G@o
INFO:api_documentation:Intelligent API MCP initialized
INFO:drawio-fortinet-meraki-mcp:Intelligent API initialized with LLM: fortinet-custom at http://localhost:11434
ERROR:api_documentation:LLM API error: 404
ERROR:api_documentation:Error generating API request: LLM request failed
ERROR:fortigate_collector:âŒ Authentication failed: 404
ERROR:fortigate_collector:Response: {"status":"error","http_status":404,"path":"system","name":"status","serial":"FGT61FTK20020975","version":"v7.6.4","build":3596,"http_method":"GET"}...
ğŸš€ Intelligent API MCP Test Suite
============================================================

ğŸ” Testing API Documentation Queries
==================================================
ğŸ“š FortiGate Endpoints: 5
ğŸ“š Meraki Endpoints: 5

ğŸ” Query: 'system status' on fortigate
  âœ… Found 1 results:
    - system_status: GET /api/v2/cmdb/system/status
      Get FortiGate system status and information...
      Relevance: 3

ğŸ” Query: 'network interfaces' on fortigate
  âœ… Found 0 results:

ğŸ” Query: 'firewall policies' on fortigate
  âœ… Found 0 results:

ğŸ” Query: 'organizations' on meraki
  âœ… Found 3 results:
    - organizations: GET /organizations
      List organizations...
      Relevance: 5
    - networks: GET /organizations/{organizationId}/networks
      List networks in an organization...
      Relevance: 2
    - devices: GET /organizations/{organizationId}/devices
      List devices in an organization...
      Relevance: 2

ğŸ” Query: 'switch ports' on meraki
  âœ… Found 1 results:
    - switch_ports: GET /devices/{serial}/switch/ports
      List switch ports...
      Relevance: 3

ğŸ” Query: 'access points' on meraki
  âœ… Found 1 results:
    - access_points: GET /networks/{networkId}/devices
      List access points in a network...
      Relevance: 3

ğŸ¤– Testing LLM API Request Generation
==================================================
ğŸ”— LLM URL: http://localhost:11434
ğŸ§  LLM Model: fortinet-custom
âœ… LLM initialized successfully

ğŸ¯ Query: 'Show me the system status'
  âœ… Generated Request:
    Method: GET
    URL: /api/v2/cmdb/system/status
    Description: Generated request for: Show me the system status
    Confidence: 0.5

ğŸ¯ Query: 'Get all network interfaces'
  âœ… Generated Request:
    Method: GET
    URL: /api/v2/cmdb/system/interface
    Description: Generated request for: Get all network interfaces
    Confidence: 0.5

ğŸ¯ Query: 'List firewall policies'
  âœ… Generated Request:
    Method: GET
    URL: /api/v2/cmdb/firewall/policy
    Description: Generated request for: List firewall policies
    Confidence: 0.5

ğŸ¯ Query: 'Check resource usage'
  âœ… Generated Request:
    Method: GET
    URL: /api/v2/monitor/system/resource/usage
    Description: Generated request for: Check resource usage
    Confidence: 0.5

ğŸ¯ Query: 'Show VIP configuration'
  âœ… Generated Request:
    Method: GET
    URL: /api/v2/cmdb/firewall/vip
    Description: Generated request for: Show VIP configuration
    Confidence: 0.5

ğŸ”§ Testing MCP Server Integration
==================================================
Warning: fortiosapi not installed. Install with: pip install fortiosapi
ğŸ”— FortiGate Collector: âœ…
ğŸ¤– Intelligent API: âœ…

ğŸ› ï¸  Available Tools: 6
  - collect_topology: Collect network topology from FortiGate API
  - generate_drawio_diagram: Generate DrawIO diagram from collected topology data
  - get_topology_summary: Get summary of collected network topology
  - export_topology_json: Export topology data as JSON for external tools
  - query_api_documentation: Query FortiGate and Meraki API documentation using natural language
  - generate_api_request: Generate API requests using LLM based on natural language

ğŸ” Testing API Documentation Tool:
  âœ… Found 1 documentation results

ğŸ¤– Testing API Request Generation Tool:
  âœ… Generated: GET /api/v2/cmdb/system/status
     Confidence: 0.5
     Description: Generated request for: Show system status and resource usage

ğŸ” Testing FortiGate API Authentication
==================================================
ğŸ  Host: 192.168.0.254:10443
ğŸ‘¤ Username: !cg@RW%G@o
ğŸ” Password: âœ… Set
âŒ Authentication failed

============================================================
ğŸ“Š TEST RESULTS SUMMARY
============================================================
API Documentation         âœ… PASS
LLM Integration           âœ… PASS
MCP Server Integration    âœ… PASS
FortiGate API Auth        âŒ FAIL

ğŸ¯ Overall: 3/4 tests passed
âš ï¸  Some tests failed. Check the output above for details.
